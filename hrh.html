<!doctype html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Game Chi Ti√™u T·∫øt ‚Äì Moni</title>

<style>
:root{
  --pink:#ec52a4; --pink2:#ff79c6;
  --bg:#fde7f2; --card:#fff;
  --text:#5b1c3a; --muted:#8a4a6b;
  --r:18px;
}
*{box-sizing:border-box}
body{
  margin:0;height:100vh;
  background:var(--bg);
  display:grid;place-items:center;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
}
.app{
  width:min(92vw,420px);
  height:92vh;
  background:linear-gradient(#ffd3e6,#fde7f2);
  border-radius:var(--r);
  box-shadow:0 20px 60px rgba(0,0,0,.2);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.top{
  padding:12px;
  display:flex;gap:10px;align-items:center;
  background:rgba(255,255,255,.6);
}
.avatar{
  width:38px;height:38px;border-radius:14px;
  background:#fff;color:var(--pink);
  display:grid;place-items:center;font-weight:900;
}
.title b{font-size:15px}
.title div{font-size:12px;color:var(--muted)}
.screen{flex:1;overflow:auto;padding:14px;display:none}
.screen.active{display:block}
.card{
  background:var(--card);
  border-radius:var(--r);
  padding:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.12);
}
.h1{font-weight:900;margin:0 0 6px}
.p{font-size:13px;color:var(--muted);margin:0}
.sp{height:12px}
.btn{
  width:100%;border:none;border-radius:14px;
  padding:12px;background:var(--pink);
  color:#fff;font-weight:900;
  cursor:pointer;
}
.btn.secondary{
  background:#ffe3f0;color:var(--text);
}
.list{display:grid;gap:10px;margin-top:10px}
.item{
  display:flex;gap:10px;align-items:center;
  background:#fff;border-radius:14px;
  padding:10px;
}
.item input{accent-color:var(--pink)}
.badge{
  margin-left:auto;
  font-size:12px;
  padding:6px 10px;
  background:#ffe3f0;border-radius:999px;
}
.chat{display:grid;gap:10px}
.bubble{
  padding:12px 14px;border-radius:18px;
  max-width:85%;font-size:14px;
}
.user{margin-left:auto;background:linear-gradient(var(--pink2),var(--pink));color:#fff}
.bot{background:#fff;color:var(--text)}
.shopTop{
  position:sticky;top:0;background:#fff;
  padding:10px;border-radius:14px;
  display:flex;justify-content:space-between;
}
.money{font-weight:900;color:var(--pink)}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
.cardShop{
  background:#fff;border-radius:14px;
  padding:10px;display:flex;flex-direction:column;gap:6px
}
.tier{
  font-size:12px;font-weight:700;
}
.side{
  margin-top:10px;
  background:#fff;border-radius:14px;padding:10px
}
.bag{list-style:none;padding:0;margin:0;display:grid;gap:6px}
.bag li{
  display:flex;justify-content:space-between;
  background:#fde7f2;border-radius:12px;
  padding:8px;font-size:13px
}
.result{text-align:center}
.badges{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:8px}
.badges span{
  background:#fff;border-radius:999px;
  padding:6px 10px;font-size:12px;font-weight:700
}
</style>
</head>

<body>
<div class="app">
  <div class="top">
    <div class="avatar">m</div>
    <div class="title">
      <b>Tr·ª£ th·ªß AI ‚Äì Moni</b>
      <div>Chi ti√™u T·∫øt th√¥ng minh</div>
    </div>
  </div>

  <!-- MODE -->
  <div class="screen active" id="mode">
    <div class="card">
      <div class="h1">Ch·ªçn ch·∫ø ƒë·ªô</div>
      <p class="p">Mua s·∫Øm h·ª£p l√Ω ƒë·ªÉ nh·∫≠n voucher</p>
    </div>
    <div class="sp"></div>
    <button class="btn" onclick="start('solo')">C√° nh√¢n (20k / 30k)</button>
  </div>

  <!-- LIST -->
  <div class="screen" id="list">
    <div class="card">
      <div class="h1">Danh s√°ch ƒë·ªì T·∫øt</div>
      <p class="p">‚≠ê M√≥n quan tr·ªçng: B√°nh ch∆∞ng, C√¢y ƒë√†o/qu·∫•t, √Åo d√†i</p>
      <div class="list" id="check"></div>
      <div class="sp"></div>
      <button class="btn" onclick="toBudget()">Ti·∫øp theo</button>
    </div>
  </div>

  <!-- BUDGET -->
  <div class="screen" id="budget">
    <div class="card">
      <div class="chat">
        <div class="bubble user" id="uText"></div>
        <div class="bubble bot" id="bText"></div>
      </div>
      <div class="sp"></div>
      <button class="btn" onclick="show('shop')">V√†o shop</button>
    </div>
  </div>

  <!-- SHOP -->
  <div class="screen" id="shop">
    <div class="shopTop">
      <b>Shop T·∫øt</b>
      <div>C√≤n: <span class="money" id="money"></span></div>
    </div>

    <div class="grid" id="shopGrid"></div>

    <div class="side">
      <b>Gi·ªè h√†ng</b>
      <ul class="bag" id="bag"></ul>
      <div class="sp"></div>
      <div id="moni"></div>
      <div class="sp"></div>
      <button class="btn" onclick="finish()">Ch·∫•m ƒëi·ªÉm</button>
    </div>
  </div>

  <!-- RESULT -->
  <div class="screen" id="result">
    <div class="card result">
      <div class="h1" id="resTitle"></div>
      <p class="p" id="resDesc"></p>
      <div class="badges" id="badges"></div>
      <div class="sp"></div>
      <div class="h1" id="voucher"></div>
      <div class="sp"></div>
      <button class="btn secondary" onclick="location.reload()">Ch∆°i l·∫°i</button>
    </div>
  </div>
</div>

<script>
const items=[
 {name:"C√¢y ƒë√†o", key:true},
 {name:"C√¢y qu·∫•t", key:true},
 {name:"B√°nh ch∆∞ng", key:true},
 {name:"√Åo d√†i", key:true},
 {name:"M·ª©t T·∫øt", key:false},
 {name:"Bao l√¨ x√¨", key:false}
];

const tiers=[
 {name:"Ti·∫øt ki·ªám", price:50000},
 {name:"Th∆∞·ªùng", price:120000},
 {name:"Cao c·∫•p", price:220000}
];

let need=[],bag=[],budget=0,money=0;

function show(id){
 document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
}

function start(){
 show("list");
 const c=document.getElementById("check");
 c.innerHTML="";
 items.forEach(i=>{
  c.innerHTML+=`
   <label class="item">
    <input type="checkbox" value="${i.name}">
    <div>${i.name}${i.key?" ‚≠ê":""}</div>
    <div class="badge">G·ª£i √Ω: Th∆∞·ªùng</div>
   </label>`;
 });
}

function toBudget(){
 need=[...document.querySelectorAll("input:checked")].map(i=>i.value);
 if(!need.length) return alert("Ch·ªçn √≠t nh·∫•t 1 m√≥n!");
 budget=220000+need.length*100000+Math.floor(Math.random()*40000);
 money=budget;
 document.getElementById("uText").innerText="M√¨nh mu·ªën mua: "+need.join(", ");
 document.getElementById("bText").innerText=
  `Ng√¢n s√°ch c·ªßa b·∫°n l√† ${budget.toLocaleString()}ƒë.
   Mu·ªën ƒë·∫°t 30k: ∆∞u ti√™n n√¢ng b√°nh ch∆∞ng + 1 m√≥n quan tr·ªçng l√™n m·ª©c ‚ÄúTh∆∞·ªùng‚Äù.`;
 show("budget");
}

function renderShop(){
 document.getElementById("money").innerText=money.toLocaleString()+"ƒë";
 const g=document.getElementById("shopGrid");
 g.innerHTML="";
 need.forEach(n=>{
  tiers.forEach(t=>{
   g.innerHTML+=`
   <div class="cardShop">
    <b>${n}</b>
    <div class="tier">${t.name} ‚Äì ${t.price.toLocaleString()}ƒë</div>
    <button class="btn" onclick="buy('${n}','${t.name}',${t.price})">Mua</button>
   </div>`;
  });
 });
}

function buy(n,t,p){
 if(money<p) return;
 money-=p;
 bag.push({n,t,p});
 document.getElementById("moni").innerText=
  t==="Cao c·∫•p"
   ?"Moni: M√≥n n√†y ƒë·∫πp nh∆∞ng kh√° ƒë·∫Øt, coi ch·ª´ng thi·∫øu ti·ªÅn cho b√°nh ch∆∞ng nh√©!"
   :t==="Ti·∫øt ki·ªám"
    ?"Moni: R·∫ª ƒë√≥, nh∆∞ng n·∫øu nhi·ªÅu m√≥n ti·∫øt ki·ªám th√¨ kh√≥ l√™n 30k."
    :"Moni: L·ª±a ch·ªçn c√¢n b·∫±ng üëç";
 updateBag(); renderShop();
}

function updateBag(){
 const b=document.getElementById("bag");
 b.innerHTML="";
 bag.forEach((x,i)=>{
  b.innerHTML+=`
   <li>${x.n} (${x.t})
    <button onclick="remove(${i})">X</button>
   </li>`;
 });
}

function remove(i){
 money+=bag[i].p;
 bag.splice(i,1);
 updateBag(); renderShop();
}

function finish(){
 const keyItems=items.filter(i=>i.key).map(i=>i.name);
 let goodKey=0;
 keyItems.forEach(k=>{
  const best=bag.filter(x=>x.n===k)
                .some(x=>x.t!=="Ti·∫øt ki·ªám");
  if(best) goodKey++;
 });
 let voucher=(goodKey>=2 && money>=0)?30000:20000;
 document.getElementById("resTitle").innerText=
  voucher===30000?"B·∫°n chi ti√™u r·∫•t h·ª£p l√Ω üéâ":"B·∫°n ho√†n th√†nh üëç";
 document.getElementById("resDesc").innerText=
  `ƒê√£ chi ${ (budget-money).toLocaleString() }ƒë / ${budget.toLocaleString()}ƒë`;
 document.getElementById("voucher").innerText=
  `Voucher ${voucher.toLocaleString()}ƒë`;
 document.getElementById("badges").innerHTML=
  goodKey>=2
   ?"<span>Chi ti√™u th√¥ng minh</span><span>Bi·∫øt ∆∞u ti√™n</span>"
   :"<span>Qu√° ti·∫øt ki·ªám</span>";
 show("result");
}

document.getElementById("shop").addEventListener("click",renderShop);
</script>
</body>
</html>
